<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jarvis - Personal AI Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/heroicons@2.0.18/24/outline/index.js" type="module"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
    tailwind.config = {
        darkMode: 'class',
        theme: {
            extend: {
                borderRadius: {
                    lg: "var(--radius)",
                    md: "calc(var(--radius) - 2px)",
                    sm: "calc(var(--radius) - 4px)",
                },
                colors: {
                    background: "var(--background)",
                    foreground: "var(--foreground)",
                    card: {
                        DEFAULT: "var(--card)",
                        foreground: "var(--card-foreground)",
                    },
                    popover: {
                        DEFAULT: "var(--popover)",
                        foreground: "var(--popover-foreground)",
                    },
                    primary: {
                        DEFAULT: "var(--primary)",
                        foreground: "var(--primary-foreground)",
                    },
                    secondary: {
                        DEFAULT: "var(--secondary)",
                        foreground: "var(--secondary-foreground)",
                    },
                    muted: {
                        DEFAULT: "var(--muted)",
                        foreground: "var(--muted-foreground)",
                    },
                    accent: {
                        DEFAULT: "var(--accent)",
                        foreground: "var(--accent-foreground)",
                    },
                    destructive: {
                        DEFAULT: "var(--destructive)",
                        foreground: "var(--destructive-foreground)",
                    },
                    border: "var(--border)",
                    input: "var(--input)",
                    ring: "var(--ring)",
                }
            },
            fontFamily: {
                sans: ['Inter', 'ui-sans-serif', 'system-ui'],
            }
        }
    };
    </script>
    <style>
        :root {
            --background: hsl(0 0% 100%);
            --foreground: hsl(222 84% 4.9%);
            --card: hsl(0 0% 100%);
            --card-foreground: hsl(222 84% 4.9%);
            --popover: hsl(0 0% 100%);
            --popover-foreground: hsl(222 84% 4.9%);
            --primary: hsl(221 83% 53%);
            --primary-foreground: hsl(210 40% 98%);
            --secondary: hsl(210 40% 96%);
            --secondary-foreground: hsl(222 47% 11%);
            --muted: hsl(210 40% 96%);
            --muted-foreground: hsl(215 16% 47%);
            --accent: hsl(210 40% 96%);
            --accent-foreground: hsl(222 47% 11%);
            --destructive: hsl(0 84% 60%);
            --destructive-foreground: hsl(210 40% 98%);
            --border: hsl(214 32% 91%);
            --input: hsl(214 32% 91%);
            --ring: hsl(221 83% 53%);
            --radius: 8px;
            --jarvis-green: hsl(160 84% 39%);
            --jarvis-green-foreground: hsl(0 0% 100%);
        }

        .dark {
            --background: hsl(222 84% 4.9%);
            --foreground: hsl(210 40% 98%);
            --card: hsl(222 84% 4.9%);
            --card-foreground: hsl(210 40% 98%);
            --popover: hsl(222 84% 4.9%);
            --popover-foreground: hsl(210 40% 98%);
            --primary: hsl(217 91% 60%);
            --primary-foreground: hsl(222 84% 4.9%);
            --secondary: hsl(217 32% 17%);
            --secondary-foreground: hsl(210 40% 98%);
            --muted: hsl(217 32% 17%);
            --muted-foreground: hsl(215 20% 65%);
            --accent: hsl(217 32% 17%);
            --accent-foreground: hsl(210 40% 98%);
            --destructive: hsl(0 62% 30%);
            --destructive-foreground: hsl(210 40% 98%);
            --border: hsl(217 32% 17%);
            --input: hsl(217 32% 17%);
            --ring: hsl(224 71% 4%);
            --jarvis-green: hsl(160 84% 35%);
            --jarvis-green-foreground: hsl(0 0% 100%);
        }

        .animate-pulse-slow {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        .animate-recording {
            animation: recording-pulse 1.5s ease-in-out infinite;
        }

        @keyframes recording-pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }

        .chat-container {
            height: calc(100vh - 120px);
        }

        .webcam-container {
            height: calc(100vh - 80px);
        }

        .message-enter {
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="font-sans antialiased transition-colors duration-300">
    <!-- @COMPONENT: Navbar [theme toggle, app title] -->
    <nav class="fixed top-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-sm border-b border-border">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- App Title -->
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center">
                        <svg class="w-5 h-5 text-primary-foreground" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                    <h1 class="text-xl font-semibold text-foreground">
                        üëßüèº Jarvis ‚Äì Your Personal AI Assistant
                    </h1>
                </div>

                <!-- Dark/Light Mode Toggle -->
                <div class="flex items-center space-x-4">
                    <button 
                        id="theme-toggle"
                        class="relative inline-flex h-6 w-11 items-center rounded-full bg-muted hover:bg-accent transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-background"
                        data-implementation="Toggle between light and dark themes, save to localStorage"
                    >
                        <span class="sr-only">Toggle dark mode</span>
                        <span id="toggle-indicator" class="inline-block h-4 w-4 transform rounded-full bg-primary transition-transform translate-x-1">
                            <!-- Light mode icon -->
                            <svg id="light-icon" class="h-3 w-3 text-primary-foreground absolute top-0.5 left-0.5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"/>
                            </svg>
                            <!-- Dark mode icon (hidden by default) -->
                            <svg id="dark-icon" class="h-3 w-3 text-primary-foreground absolute top-0.5 left-0.5 hidden" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/>
                            </svg>
                        </span>
                    </button>
                </div>
            </div>
        </div>
    </nav>
    <!-- @END_COMPONENT: Navbar -->

    <!-- @COMPONENT: JarvisUI [main container with two-column layout] -->
    <main class="pt-16 bg-background min-h-screen">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 h-full">
                
                <!-- @COMPONENT: WebcamStream [live camera feed] -->
                <div class="webcam-container">
                    <div class="bg-card border border-border rounded-xl shadow-sm h-full overflow-hidden">
                        <!-- Header -->
                        <div class="flex items-center justify-between p-4 border-b border-border">
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 bg-red-500 rounded-full animate-pulse-slow"></div>
                                <span class="text-sm font-medium text-foreground">Live Camera</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <button class="p-2 hover:bg-muted rounded-lg transition-colors" title="Camera Settings">
                                    <svg class="w-4 h-4 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Camera Feed Area -->
                        <div class="relative h-full bg-muted flex items-center justify-center" data-implementation="react-webcam component goes here">
                            <!-- Placeholder for webcam stream -->
                            <div class="absolute inset-4 bg-gradient-to-br from-gray-800 to-gray-900 rounded-lg flex items-center justify-center">
                                <div class="text-center">
                                    <svg class="w-16 h-16 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                                    </svg>
                                    <p class="text-sm text-gray-400" data-mock="true">Camera feed will appear here</p>
                                    <p class="text-xs text-gray-500 mt-1" data-mock="true">Grant camera permission to start</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- @END_COMPONENT: WebcamStream -->

                <!-- Chat Interface Column -->
                <div class="chat-container flex flex-col">
                    
                    <!-- @COMPONENT: ChatBox [scrollable message history] -->
                    <div class="bg-card border border-border rounded-xl shadow-sm flex-1 flex flex-col overflow-hidden">
                        <!-- Chat Header -->
                        <div class="flex items-center justify-between p-4 border-b border-border">
                            <div class="flex items-center space-x-2">
                                <div class="w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center">
                                    <span class="text-sm font-semibold text-white">J</span>
                                </div>
                                <div>
                                    <h3 class="font-medium text-foreground">Jarvis Assistant</h3>
                                    <p class="text-xs text-muted-foreground">Online ‚Ä¢ Ready to help</p>
                                </div>
                            </div>
                            <button 
                                class="text-sm text-muted-foreground hover:text-foreground transition-colors px-3 py-1 hover:bg-muted rounded-md"
                                data-event="click:clearChat"
                                data-implementation="Clear all messages from chat history"
                            >
                                Clear Chat
                            </button>
                        </div>

                        <!-- Messages Container -->
                        <div class="flex-1 overflow-y-auto p-4 space-y-4" id="chat-messages" data-implementation="Auto-scroll to bottom on new messages">
                            <!-- Sample User Message -->
                            <div class="flex justify-end" data-mock="true">
                                <div class="max-w-xs lg:max-w-md">
                                    <div class="bg-primary text-primary-foreground rounded-2xl rounded-br-md px-4 py-2 message-enter">
                                        <p class="text-sm" data-bind="message.text">What is diabetes and how can I manage it?</p>
                                    </div>
                                    <p class="text-xs text-muted-foreground mt-1 text-right" data-bind="message.timestamp">2:34 PM</p>
                                </div>
                            </div>

                            <!-- Sample Jarvis Message -->
                            <div class="flex justify-start" data-mock="true">
                                <div class="max-w-xs lg:max-w-md">
                                    <div class="bg-green-500 text-white rounded-2xl rounded-bl-md px-4 py-2 message-enter">
                                        <p class="text-sm" data-bind="message.text">Diabetes is a chronic condition where your blood glucose levels are too high. Here are key management strategies: 1) Monitor blood sugar regularly, 2) Follow a balanced diet with controlled carbohydrates, 3) Exercise regularly, 4) Take medications as prescribed. Would you like me to explain any of these in more detail?</p>
                                    </div>
                                    <p class="text-xs text-muted-foreground mt-1" data-bind="message.timestamp">2:34 PM</p>
                                </div>
                            </div>

                            <!-- Typing Indicator (Hidden by default) -->
                            <div class="flex justify-start hidden" id="typing-indicator">
                                <div class="max-w-xs lg:max-w-md">
                                    <div class="bg-muted rounded-2xl rounded-bl-md px-4 py-3">
                                        <div class="flex space-x-1">
                                            <div class="w-2 h-2 bg-muted-foreground rounded-full animate-bounce"></div>
                                            <div class="w-2 h-2 bg-muted-foreground rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                                            <div class="w-2 h-2 bg-muted-foreground rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- @MAP: messages.map(message => ( -->
                            <!-- Message components will be rendered here dynamically -->
                            <!-- @END_MAP )) -->
                        </div>

                        <!-- Message Input -->
                        <div class="border-t border-border p-4">
                            <div class="flex space-x-3">
                                <div class="flex-1">
                                    <input 
                                        type="text" 
                                        placeholder="Type your message here..."
                                        class="w-full px-4 py-3 bg-input border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent text-foreground placeholder-muted-foreground"
                                        data-event="keypress:handleEnterKey"
                                        data-implementation="Send message on Enter key press"
                                    />
                                </div>
                                <button 
                                    class="px-6 py-3 bg-primary text-primary-foreground rounded-xl hover:bg-primary/90 transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background disabled:opacity-50 disabled:cursor-not-allowed"
                                    data-event="click:sendMessage"
                                    data-implementation="Send text message to API"
                                >
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- @END_COMPONENT: ChatBox -->

                    <!-- @COMPONENT: AudioRecorder [microphone controls] -->
                    <div class="mt-4 bg-card border border-border rounded-xl shadow-sm p-4">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                <div class="flex items-center space-x-2">
                                    <svg class="w-5 h-5 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"/>
                                    </svg>
                                    <span class="text-sm font-medium text-foreground">Voice Input</span>
                                </div>
                                
                                <!-- Recording Status -->
                                <div class="flex items-center space-x-1 hidden" id="recording-status">
                                    <div class="w-2 h-2 bg-red-500 rounded-full animate-recording"></div>
                                    <span class="text-xs text-red-500 font-medium">Recording...</span>
                                </div>
                            </div>

                            <!-- Audio Controls -->
                            <div class="flex items-center space-x-2">
                                <!-- Start Recording Button -->
                                <button 
                                    id="start-recording"
                                    class="flex items-center space-x-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-background"
                                    data-event="click:startRecording"
                                    data-implementation="Start audio recording using MediaRecorder API"
                                >
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z" clip-rule="evenodd"/>
                                    </svg>
                                    <span class="text-sm font-medium">Record</span>
                                </button>

                                <!-- Stop Recording Button (Hidden by default) -->
                                <button 
                                    id="stop-recording"
                                    class="flex items-center space-x-2 px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 focus:ring-offset-background hidden"
                                    data-event="click:stopRecording"
                                    data-implementation="Stop recording and send audio to API endpoint"
                                >
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 012 0v6a1 1 0 11-2 0V7zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V7z" clip-rule="evenodd"/>
                                    </svg>
                                    <span class="text-sm font-medium">Stop</span>
                                </button>

                                <!-- Processing Indicator -->
                                <div class="flex items-center space-x-2 hidden" id="processing-indicator">
                                    <div class="animate-spin w-4 h-4 border-2 border-primary border-t-transparent rounded-full"></div>
                                    <span class="text-sm text-muted-foreground">Processing...</span>
                                </div>
                            </div>
                        </div>

                        <!-- Audio Visualization (Placeholder) -->
                        <div class="px-4 pb-4 pt-2">
                            <div class="h-12 bg-muted/50 rounded-lg flex items-center justify-center">
                                <div class="flex items-end space-x-1" data-implementation="Audio waveform visualization during recording">
                                    <div class="w-1 h-2 bg-primary/30 rounded-full"></div>
                                    <div class="w-1 h-4 bg-primary/50 rounded-full"></div>
                                    <div class="w-1 h-3 bg-primary/40 rounded-full"></div>
                                    <div class="w-1 h-6 bg-primary/60 rounded-full"></div>
                                    <div class="w-1 h-2 bg-primary/30 rounded-full"></div>
                                    <div class="w-1 h-4 bg-primary/50 rounded-full"></div>
                                    <div class="w-1 h-5 bg-primary/55 rounded-full"></div>
                                    <div class="w-1 h-3 bg-primary/40 rounded-full"></div>
                                    <span class="text-xs text-muted-foreground ml-3" data-mock="true">Ready to record</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- @END_COMPONENT: AudioRecorder -->

                <!-- @COMPONENT: VoicePlayer [audio playback controls] -->
                <div class="mt-4 bg-card border border-border rounded-xl shadow-sm p-4 hidden" id="voice-player" data-implementation="Show when AI audio response is available">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <svg class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.789l-4.281-3.422H2a1 1 0 01-1-1V7a1 1 0 011-1h2.102l4.281-3.422a1 1 0 011.617.789zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.983 5.983 0 01-1.757 4.243 1 1 0 01-1.415-1.414A3.983 3.983 0 0013 10a3.983 3.983 0 00-1.172-2.829 1 1 0 010-1.414z" clip-rule="evenodd"/>
                            </svg>
                            <span class="text-sm font-medium text-foreground">Jarvis Response</span>
                        </div>
                        
                        <div class="flex items-center space-x-2">
                            <button class="p-2 hover:bg-muted rounded-lg transition-colors" data-event="click:togglePlayback">
                                <svg class="w-4 h-4 text-foreground" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"/>
                                </svg>
                            </button>
                            <div class="w-24 h-1 bg-muted rounded-full">
                                <div class="w-1/3 h-full bg-green-500 rounded-full"></div>
                            </div>
                            <span class="text-xs text-muted-foreground" data-mock="true">0:08</span>
                        </div>
                    </div>
                </div>
                <!-- @END_COMPONENT: VoicePlayer -->

            </div>
        </div>
    </main>
    <!-- @END_COMPONENT: JarvisUI -->

    <!-- Loading Overlay -->
    <div class="fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center hidden" id="loading-overlay">
        <div class="bg-card border border-border rounded-xl shadow-lg p-6 max-w-sm mx-4">
            <div class="flex items-center space-x-3">
                <div class="animate-spin w-6 h-6 border-2 border-primary border-t-transparent rounded-full"></div>
                <div>
                    <h3 class="font-medium text-foreground">Jarvis is thinking...</h3>
                    <p class="text-sm text-muted-foreground">Analyzing your request</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification Container -->
    <div id="toast-container" class="fixed top-20 right-4 z-50 space-y-2" data-implementation="Use react-toastify for error notifications">
        <!-- Sample Error Toast (Hidden by default) -->
        <div class="bg-destructive text-destructive-foreground px-4 py-3 rounded-lg shadow-lg flex items-center space-x-3 hidden" id="error-toast">
            <svg class="w-5 h-5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
            </svg>
            <div>
                <p class="font-medium">Connection Error</p>
                <p class="text-sm opacity-90" data-mock="true">Failed to connect to Jarvis API</p>
            </div>
        </div>
    </div>

    <script>
        // Theme Management
        (() => {
            const themeToggle = document.getElementById('theme-toggle');
            const toggleIndicator = document.getElementById('toggle-indicator');
            const lightIcon = document.getElementById('light-icon');
            const darkIcon = document.getElementById('dark-icon');
            
            // Get saved theme or default to light
            const savedTheme = localStorage.getItem('theme') || 'light';
            
            function updateTheme(theme) {
                if (theme === 'dark') {
                    document.documentElement.classList.add('dark');
                    toggleIndicator.classList.remove('translate-x-1');
                    toggleIndicator.classList.add('translate-x-6');
                    lightIcon.classList.add('hidden');
                    darkIcon.classList.remove('hidden');
                } else {
                    document.documentElement.classList.remove('dark');
                    toggleIndicator.classList.remove('translate-x-6');
                    toggleIndicator.classList.add('translate-x-1');
                    lightIcon.classList.remove('hidden');
                    darkIcon.classList.add('hidden');
                }
                localStorage.setItem('theme', theme);
            }
            
            // Initialize theme
            updateTheme(savedTheme);
            
            // Theme toggle event
            themeToggle.addEventListener('click', () => {
                const currentTheme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                updateTheme(newTheme);
            });
        })();

        // Audio Recording Simulation
        (() => {
            const startBtn = document.getElementById('start-recording');
            const stopBtn = document.getElementById('stop-recording');
            const recordingStatus = document.getElementById('recording-status');
            const processingIndicator = document.getElementById('processing-indicator');
            
            startBtn.addEventListener('click', () => {
                // TODO: Implement MediaRecorder API for actual audio recording
                startBtn.classList.add('hidden');
                stopBtn.classList.remove('hidden');
                recordingStatus.classList.remove('hidden');
            });
            
            stopBtn.addEventListener('click', () => {
                stopBtn.classList.add('hidden');
                recordingStatus.classList.add('hidden');
                processingIndicator.classList.remove('hidden');
                
                // Simulate processing time
                setTimeout(() => {
                    processingIndicator.classList.add('hidden');
                    startBtn.classList.remove('hidden');
                    // TODO: Send audio to /ask endpoint and handle response
                }, 2000);
            });
        })();

        // Chat Input Handler
        (() => {
            const messageInput = document.querySelector('input[type="text"]');
            const sendButton = document.querySelector('button[data-event="click:sendMessage"]');
            const chatMessages = document.getElementById('chat-messages');
            const typingIndicator = document.getElementById('typing-indicator');
            
            function addMessage(text, isUser = true) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `flex ${isUser ? 'justify-end' : 'justify-start'} message-enter`;
                
                const timestamp = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                
                messageDiv.innerHTML = `
                    <div class="max-w-xs lg:max-w-md">
                        <div class="${isUser ? 'bg-primary text-primary-foreground' : 'bg-green-500 text-white'} rounded-2xl ${isUser ? 'rounded-br-md' : 'rounded-bl-md'} px-4 py-2">
                            <p class="text-sm">${text}</p>
                        </div>
                        <p class="text-xs text-muted-foreground mt-1 ${isUser ? 'text-right' : ''}">${timestamp}</p>
                    </div>
                `;
                
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            function sendMessage() {
                const message = messageInput.value.trim();
                if (!message) return;
                
                // Add user message
                addMessage(message, true);
                messageInput.value = '';
                
                // Show typing indicator
                typingIndicator.classList.remove('hidden');
                chatMessages.scrollTop = chatMessages.scrollHeight;
                
                // TODO: Send message to /ask endpoint
                // Simulate API call
                setTimeout(() => {
                    typingIndicator.classList.add('hidden');
                    addMessage("I understand your question. Let me help you with that information based on my knowledge base.", false);
                    // TODO: Play audio response using VoicePlayer component
                }, 1500);
            }
            
            sendButton.addEventListener('click', sendMessage);
            messageInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
        })();

        // Clear Chat Handler
        (() => {
            const clearButton = document.querySelector('button[data-event="click:clearChat"]');
            const chatMessages = document.getElementById('chat-messages');
            
            clearButton.addEventListener('click', () => {
                // Keep only the sample messages for demo, in real app this would clear all
                // TODO: Clear React state and reset chat history
                console.log('Clear chat clicked - implement state reset');
            });
        })();

        // Responsive Layout Adjustments
        (() => {
            function adjustLayout() {
                const isMobile = window.innerWidth < 1024;
                // TODO: Implement responsive layout adjustments for mobile
                // This would be handled by Tailwind classes in React implementation
            }
            
            window.addEventListener('resize', adjustLayout);
            adjustLayout(); // Initial call
        })();

        // API Integration Mock Functions
        (() => {
            // TODO: Implement actual API calls using Axios
            
            async function sendTextMessage(message) {
                try {
                    // const response = await axios.post('http://localhost:8000/ask', { message });
                    // Handle response and update UI
                    console.log('Sending text message:', message);
                } catch (error) {
                    console.error('API Error:', error);
                    // Show error toast
                }
            }
            
            async function sendAudioMessage(audioBlob) {
                try {
                    // const formData = new FormData();
                    // formData.append('audio', audioBlob);
                    // const response = await axios.post('http://localhost:8000/ask', formData);
                    console.log('Sending audio message:', audioBlob);
                } catch (error) {
                    console.error('API Error:', error);
                    // Show error toast
                }
            }
            
            async function playAudioResponse(audioUrl) {
                try {
                    // const audio = new Audio(`http://localhost:8000${audioUrl}`);
                    // audio.play();
                    console.log('Playing audio response:', audioUrl);
                } catch (error) {
                    console.error('Audio playback error:', error);
                }
            }
            
            // Expose functions for component use
            window.jarvisAPI = {
                sendTextMessage,
                sendAudioMessage,
                playAudioResponse
            };
        })();
    </script>
</body>
</html>